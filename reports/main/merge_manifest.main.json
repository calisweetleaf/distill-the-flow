{
  "version": "2.0.0",
  "operation": "provider_upsert_merge",
  "provider": "claude",
  "run_id": "claude_20260227_080825_20260226",
  "merged_at": "2026-02-27T07:28:51.315852+00:00",
  "dry_run": false,
  "snapshot_path": "archive/main/claude_20260227_080825_20260226/moonshine_mash_premerge.db",
  "counts": {
    "conversations": {
      "inserted": 0,
      "updated": 0,
      "skipped": 207
    },
    "messages": {
      "inserted": 0,
      "updated": 0,
      "skipped": 2232
    },
    "distilled_conversations": {
      "inserted": 0,
      "updated": 0,
      "skipped": 141
    }
  },
  "token_reconciliation": {
    "provider": "claude",
    "run_id": "claude_20260227_080825_20260226",
    "db_total_tokens": 1402496,
    "db_user_tokens": 284847,
    "db_assistant_tokens": 1117649,
    "ledger_canonical_tokens": 115330530,
    "delta": -113928034,
    "reconciliation_note": "DB uses word*1.3 heuristic estimation; ledger uses o200k_base exact tiktoken count",
    "source_sha256": "2bcadbb01f0defa2e7339380cc524305ebbb803e487f467fdaf3074d65aa071e",
    "status": "reconciled"
  },
  "gates": {
    "G4": "PASS",
    "G5": "PASS",
    "G6": "PASS",
    "G7": "PASS",
    "all_pass": true
  },
  "gate_detail": {
    "G4_snapshot_exists": true,
    "G4_note": "archive\\main\\claude_20260227_080825_20260226\\moonshine_mash_premerge.db",
    "G5_counters_non_null": true,
    "G6_idempotence_proof": "UNIQUE record_uid index enforces at storage layer",
    "G7_reconciliation_emitted": true,
    "all_pass": true
  },
  "idempotence_proof": null
}